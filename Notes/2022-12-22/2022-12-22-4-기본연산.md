---
title: MySQL 고급
---

# 데이터 타입 (MySQL)
자세한 것은 교재를 참고. 중요한 몇 가지는 외워줘야 함.

## 숫자 타입
|데이터 형식    |바이트 수|설명                              |
|:-------------:|--------:|----------------------------------|
|INT            |4        |정수                              |
|BIGINT         |8        |정수(범위가 더 큼)                |
|FLOAT          |4        |실수(기본형; 자바는 double이 기본)|
|DOUBLE         |8        |실수(범위가 더 큼)                |
|DECIMAL(m[, d])|5 ~ 17   |전체 자릿수(m)와 소수점 이하 자릿수(d) 지정; 연산 오차가 없음|

## 문자 타입
|데이터 형식|바이트 수|설명                              |
|:---------:|--------:|----------------------------------|
|CHAR(n)    |1 ~ 255  |고정 공간; 최대 255자             |
|VARCHAR(n) |1 ~ 65535|가변 공간; 최대 65535자           |
|LONGTEXT   |1 ~ 4GB  |대용량 텍스트를 저장해야 할 떄; 많이 쓰지는 않음|

## 날짜 타입
|데이터 형식|바이트 수|설명                          |
|:---------:|--------:|------------------------------|
|DATE       |3        |날짜만 표현 YYYY-mm-DD        |
|DATETIME   |8        |날짜, 시간 YYYY-mm-DD HH-MM-SS|

# CAST(): 형 변환
자바에서는 변수 앞에 캐스트 연산자 "(type)"를 붙였으나,  
MySQL에서는 함수 CAST()를 사용

### 실수에서 정수로
```sql
USE sqldb;

SELECT AVG(amount) AS '평균 구매 개수' FROM buytbl;
-- 실행 결과
-- +----------------+
-- | 평균 구매 개수 |
-- +----------------+
-- |         2.9167 |
-- +----------------+
-- 1 row in set (0.00 sec)

-- [실수 값을 정수로 변환]
SELECT CAST(AVG(amount) AS UNSIGNED INTEGER) AS '평균 구매 개수' FROM buytbl;
-- 실행 결과
-- +----------------+
-- | 평균 구매 개수 |
-- +----------------+
-- |              3 |
-- +----------------+
-- 1 row in set (0.00 sec)
-- 값이 반올림되어 정수로 변환되었음
```

### 문자열에서 날짜로
```sql
-- [SELECT문]
-- SELECT문은 무조건 테이블에서 값을 가져오는 기능만 있는 것이 아니다.
-- 모든 데이터를 가져와 보여줄 수 있다.
SELECT '홍길동';
-- +--------+
-- | 홍길동 |
-- +--------+
-- | 홍길동 |
-- +--------+
-- 1 row in set (0.00 sec)
-- 테이블과 상관 없이 '홍길동'을 가져왔으나, 결과 집합의 형식으로 값을 보여준다.


-- [특정 구분자로 구분된 문자열을 날짜 데이터로 변환]
SELECT CAST('2022/12/22' AS DATE);
-- +----------------------------+
-- | CAST('2022/12/22' AS DATE) |
-- +----------------------------+
-- | 2022-12-22                 |
-- +----------------------------+
-- 1 row in set, 1 warning (0.00 sec)

-- 문자열을 날짜로 바꾸면 연산이 가능해진다.
-- 몇 일 뒤, 몇 달 뒤 등.
```

# CONCAT(): 문자열 연결
```sql
SELECT  num,
        CONCAT(CAST(price AS CHAR(4)), ' * ', CAST(amount AS CHAR(4))) AS '단가 * 수량',
        price * amount AS '구매액'
FROM buytbl;
-- 실행 결과
-- +-----+-------------+--------+
-- | num | 단가 * 수량 | 구매액 |
-- +-----+-------------+--------+
-- |   1 | 30 * 2      |     60 |
-- |   2 | 1000 * 1    |   1000 |
-- |   3 | 200 * 1     |    200 |
-- |  ~  |      ~      |    ~   |
-- |  10 | 30 * 2      |     60 |
-- |  11 | 15 * 1      |     15 |
-- |  12 | 30 * 2      |     60 |
-- +-----+-------------+--------+
-- 12 rows in set (0.00 sec)

-- CONCAT(): 문자열을 연결한다.
```

# 묵시적 형 변환
MySQL(다른 RDBMS의 경우에도)은 묵시적 형 변환이 특이하다. 일반적인 상식과는 다르게 형 변환이 이뤄진다. 다 외울 수 있지만, 이 특성을 이애하고 있는 것은 중요하다.

```sql
SELECT '100' + '200';
-- 실행 결과
-- +---------------+
-- | '100' + '200' |
-- +---------------+
-- |           300 |
-- +---------------+
-- 1 row in set (0.00 sec)
-- 이게 왜 돼...?
-- 문자열 간의 덧셈을 하더라도 Concatenating이 일어나지 않고, 필요한 경우 CAST()를 사용해야함을 앞에서 보았다.
-- 대신 더하기 연산을 할 때, 피연산자를 숫자로 형 변환한다.

SELECT 'Hello' + 'World';
-- 실행 결과
-- +-------------------+
-- | 'Hello' + 'World' |
-- +-------------------+
-- |                 0 |
-- +-------------------+
-- 1 row in set, 2 warnings (0.00 sec)
-- 숫자로 변환할 수 없는 문자열을 0으로 변환하여 더했다.
```