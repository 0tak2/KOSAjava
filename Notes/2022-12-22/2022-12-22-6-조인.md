---
title: 조인(Join)
---

# 조인(Join) 개요
여러 개의 테이블을 연결하는 연산을 말한다. 이떄 결합 기준은 외래키Foreign Key이다. 즉, 외래 키를 기준으로 두 개 이상의 테이블을 서로 연결해서 하나의 결과 집합을 반환한다.

기본적으로 데이터베이스의 테이블은 무결성을 유지하고 중복 데이터를 방지하기 위해 나누어져 있다. 따라서 연관된 데이터가 여러 서로 다른 테이블에 분산되어 있는 경우 테이블을 연결해야한다.

# 실습
## 테이블 확인
```sql
-- 우선 연결할 두 테이블을 확인해보자
SELECT * FROM usertbl;
-- +--------+--------+-----------+------+---------+---------+--------+------------+
-- | userID | name   | birthYear | addr | mobile1 | mobile2 | height | mDate      |
-- +--------+--------+-----------+------+---------+---------+--------+------------+
-- | BBK    | 바비킴 |      1973 | 서울 | 010     | 0000000 |    176 | 2013-05-05 |
-- | EJW    | 은지원 |      1972 | 경북 | 011     | 8888888 |    174 | 2014-03-03 |

SELECT * FROM buytbl;
-- +-----+--------+----------+-----------+-------+--------+
-- | num | userID | prodName | groupName | price | amount |
-- +-----+--------+----------+-----------+-------+--------+
-- |   1 | KBS    | 운동화   | NULL      |    30 |      2 |
-- |   2 | KBS    | 노트북   | 전자      |  1000 |      1 |

-- buytbl의 userID는 usertbl의 프라이머리 키를 참조하는 외래 키임을 알 수 있다.
```

## INNER JOIN
```sql
-- 두 테이블을 교차 연결
SELECT *
FROM (usertbl -- 기준 테이블
     INNER JOIN buytbl -- 기준 테이블 우측에 붙을 테이블
     );
-- +--------+--------+-----------+------+---------+---------+--------+------------+-----+--------+----------+-----------+-------+--------+
-- | userID | name   | birthYear | addr | mobile1 | mobile2 | height | mDate      | num | userID | prodName | groupName | price | amount |
-- +--------+--------+-----------+------+---------+---------+--------+------------+-----+--------+----------+-----------+-------+--------+
-- | YJS    | 윤종신 |      1969 | 경남 | NULL    | NULL    |    170 | 2005-05-05 |   1 | KBS    | 운동화   | NULL      |    30 |      2 |
-- | SSK    | 성시경 |      1979 | 서울 | NULL    | NULL    |    186 | 2013-12-12 |   1 | KBS    | 운동화   | NULL      |    30 |      2 |
-- | LSG    | 이승기 |      1987 | 서울 | 011     | 1111111 |    182 | 2008-08-08 |   1 | KBS    | 운동화   | NULL      |    30 |      2 |
```
말 그래도 두 개의 테이블이 붙여졌다. usertbl의 각 로우에 대해 buytbl의 각 로우가 결합된 상황이다. 가능한 모든 경우의 수로 각 로우가 연결되었으므로 의미가 없는 (Not Semantic) 연결이 포함되어 있다.

&nbsp;

```sql
SELECT *
FROM (usertbl
     INNER JOIN buytbl
     ON usertbl.userID = buytbl.userID);
-- +--------+--------+-----------+------+---------+---------+--------+------------+-----+--------+----------+-----------+-------+--------+
-- | userID | name   | birthYear | addr | mobile1 | mobile2 | height | mDate      | num | userID | prodName | groupName | price | amount |
-- +--------+--------+-----------+------+---------+---------+--------+------------+-----+--------+----------+-----------+-------+--------+
-- | KBS    | 김범수 |      1979 | 경남 | 011     | 2222222 |    173 | 2012-04-04 |   1 | KBS    | 운동화   | NULL      |    30 |      2 |
-- | KBS    | 김범수 |      1979 | 경남 | 011     | 2222222 |    173 | 2012-04-04 |   2 | KBS    | 노트북   | 전자      |  1000 |      1 |
-- | JYP    | 조용필 |      1950 | 경기 | 011     | 4444444 |    166 | 2009-04-04 |   3 | JYP    | 모니터   | 전자      |   200 |      1 |
-- | BBK    | 바비킴 |      1973 | 서울 | 010     | 0000000 |    176 | 2013-05-05 |   4 | BBK    | 모니터   | 전자      |   200 |      5 |
```
ON 뒤에 조건을 지정하여 의미 있는 데이터만을 추려내었다.

&nbsp;

```sql
SELECT usertbl.userID, name, prodName, price, amount
FROM (usertbl
     INNER JOIN buytbl
     ON usertbl.userID = buytbl.userID);
-- +--------+--------+----------+-------+--------+
-- | userID | name   | prodName | price | amount |
-- +--------+--------+----------+-------+--------+
-- | KBS    | 김범수 | 운동화   |    30 |      2 |
-- | KBS    | 김범수 | 노트북   |  1000 |      1 |
-- | JYP    | 조용필 | 모니터   |   200 |      1 |
```
SELECT 뒤에 질의할 컬럼을 지정하였다. 이때 userID는 조인된 결과 집합에 두 개 컬럼이 있으므로(usertbl.userID, buytbl.userID) 테이블명을 명시하였다. 명시하지 않으면 쿼리가 모호하다는 오류가 발생한다.

&nbsp;

조인은 시간과 비용이 많이 들기 떄문에 필요한 경우에만 사용하는 것이 좋다.